<!DOCTYPE html>
<html>

<head>
    <title>Profile</title>
    <script>
        function confirmDeletion(event) {
            const confirmed = confirm('Are you sure you want to delete this?');
            if (!confirmed) {
                event.preventDefault();
            }
        }
    </script>
</head>

<body>
    <h1>Your Profile</h1>

    <h2>Your Questions</h2>
    <ul>
        <% questions.forEach(question=> { %>
            <li>
                <a href="/questions/<%= question._id %>">
                    <%= question.title %>
                </a>
                <p>
                    <%= question.description %>
                </p>
                <small>Asked on <%= question.date.toDateString() %></small>
                <form action="/profile/questions/<%= question._id %>/delete" method="post" style="display:inline;"
                    onsubmit="confirmDeletion(event)">
                    <button type="submit">Delete</button>
                </form>
            </li>
            <% }) %>
    </ul>

    <h2>Your Answers</h2>
    <ul>
        <% answers.forEach(answer=> { %>
            <li>
                <p>
                    <%= answer.content %>
                </p>
                <% if (answer.question) { %>
                    <small>Answered on <%= answer.date.toDateString() %> for <a
                                href="/questions/<%= answer.question._id %>">
                                <%= answer.question.title %>
                            </a></small>
                    <% } else { %>
                        <small>Answered on <%= answer.date.toDateString() %> (Question not available)</small>
                        <% } %>
                            <form action="/profile/answers/<%= answer._id %>/delete" method="post"
                                style="display:inline;" onsubmit="confirmDeletion(event)">
                                <button type="submit">Delete</button>
                            </form>
            </li>
            <% }) %>
    </ul>
</body>

</html>